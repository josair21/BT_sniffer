#include <U8g2lib.h> 
#include "functions.h"
U8G2_SSD1306_128X64_NONAME_1_HW_I2C u8g2(U8G2_R0, /* reset=*/ U8X8_PIN_NONE, /* clock=*/ 22, /* data=*/ 21);   // ESP32 Thing, HW I2C with pin remapping
static const uint8_t logo_original[] = {
  B00000000,B00000000,B00001111,B11110000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,
  B00000000,B00000000,B00111111,B11111100,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,
  B00000000,B00000000,B11111111,B11111111,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,
  B00000000,B00000001,B11111111,B11111111,B11000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,
  B00000000,B00000111,B11111111,B11111111,B11100000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000111,B10001100,
  B00000000,B00001111,B11111111,B11111111,B11110000,B00000000,B00000000,B11111111,B11110000,B11111110,B11111111,B11000000,B01111111,B11100000,B00011111,B11111100,
  B00000000,B00011111,B11111111,B11111111,B11111000,B00000000,B00000000,B11111111,B11110000,B11111110,B11111111,B11000000,B01111111,B11100000,B00111111,B11111100,
  B00000000,B00011111,B11111111,B11111111,B11111100,B00000000,B00000000,B01111111,B11100000,B11111100,B11111111,B11000000,B01111111,B11100000,B01111111,B01111100,
  B00000000,B00111111,B11111111,B11111111,B11111110,B00000000,B00000000,B00111111,B11000000,B00111100,B01111111,B11000000,B01111111,B11000000,B11111110,B00111100,
  B00000000,B01111111,B11111111,B11111111,B11111111,B00000000,B00000000,B00111111,B11000000,B00111000,B00111111,B11100000,B11111111,B10000000,B11111110,B00011100,
  B00000000,B11111111,B11111111,B11111111,B11111111,B10000000,B00000000,B00111111,B11000000,B00111000,B00111111,B11100000,B11111111,B10000001,B11111110,B00011100,
  B00000000,B11111111,B11111111,B11111111,B11111111,B10000000,B00000000,B00011111,B11100000,B01111000,B00111111,B11100000,B11111111,B10000001,B11111110,B00011110,
  B00000000,B11111111,B11111111,B11111111,B11111111,B11000000,B00000000,B00011111,B11100000,B01110000,B00111111,B11100000,B11111111,B10000001,B11111110,B00011110,
  B00000001,B11111111,B11111111,B11111111,B11111111,B11000000,B00100000,B00011111,B11100000,B01110000,B00111111,B11110001,B11111111,B10000011,B11111110,B00001110,
  B00000001,B11111111,B11111111,B11111111,B11111111,B11100000,B00100000,B00011111,B11100000,B01110000,B00111111,B11110001,B11111111,B10000011,B11111110,B00001110,
  B00000011,B11111111,B11111111,B11111111,B11111111,B11100000,B01110000,B00011111,B11100000,B01110000,B00111111,B11110001,B11111111,B10000011,B11111110,B00000100,
  B00000011,B11111111,B11111111,B11111111,B11111111,B11110000,B11110000,B00011111,B11110000,B11110000,B00111111,B11111001,B11111111,B10000011,B11111110,B00000000,
  B00000111,B11111111,B11111111,B11111111,B11111111,B11110001,B11110000,B00001111,B11110000,B11100000,B00111111,B11111011,B11111111,B10000011,B11111110,B00000000,
  B00000111,B11111111,B11111111,B11111111,B11111111,B11110011,B11110000,B00001111,B11110000,B11100000,B00111111,B11111011,B11111111,B10000111,B11111110,B00000000,
  B00000111,B11111111,B11111111,B11111111,B11111111,B11111011,B11110000,B00001111,B11110000,B11100000,B00111111,B11111111,B11111111,B10000111,B11111110,B00000000,
  B00000111,B11111111,B11111111,B11111111,B11111111,B11111111,B11110000,B00001111,B11110000,B11100000,B00111011,B11111111,B01111111,B10000111,B11111110,B00000000,
  B00001111,B11111111,B11111111,B11111111,B11111111,B11100111,B11110000,B00001111,B11110001,B11100000,B00111011,B11111111,B01111111,B10000111,B11111110,B00000000,
  B00001111,B11111111,B11111111,B11111111,B11111111,B11000011,B11110000,B00000111,B11111001,B11000000,B00111001,B11111110,B01111111,B10000111,B11111110,B00000000,
  B00001111,B11111111,B11111111,B11111111,B11111111,B10000111,B11111000,B00000111,B11111001,B11000000,B00111001,B11111110,B01111111,B10000111,B11111110,B00000000,
  B00001111,B11111111,B11111111,B11111111,B11111111,B00000111,B11111000,B00000111,B11111001,B11000000,B00111001,B11111110,B01111111,B10000111,B11111110,B00000000,
  B00001111,B11111111,B11111111,B11111111,B11111110,B00000111,B11111000,B00000111,B11111001,B11000000,B00111001,B11111110,B01111111,B10000111,B11111110,B00000000,
  B00001111,B11111111,B11111111,B11111111,B11111100,B00000111,B11111000,B00000111,B11111001,B11000000,B00111000,B11111100,B01111111,B10000111,B11111110,B00000000,
  B00001111,B11111111,B11111111,B11111111,B11111000,B00000111,B11111000,B00000011,B11111111,B10000000,B00111000,B11111100,B01111111,B10000111,B11111110,B00000000,
  B00001111,B11111111,B11111111,B11111111,B11110000,B00000111,B11111000,B00000011,B11111111,B10000000,B00111000,B11111100,B01111111,B10000111,B11111110,B00000000,
  B00001111,B11111111,B11111111,B11111111,B11110000,B00000111,B11111000,B00000011,B11111111,B10000000,B00111000,B11111100,B01111111,B10000011,B11111110,B00000000,
  B00001111,B11111111,B11111111,B11111111,B11111000,B00000111,B11111100,B00000011,B11111111,B10000000,B00111000,B01111000,B01111111,B10000011,B11111110,B00000000,
  B00001111,B11111111,B11111111,B11111111,B11111000,B00000111,B11111100,B00000011,B11111111,B10000000,B00111000,B01111000,B01111111,B10000011,B11111110,B00000000,
  B00001111,B11111111,B11111111,B11111111,B11111100,B00000111,B11111100,B00000001,B11111111,B00000000,B00111000,B01111000,B01111111,B10000011,B11111110,B00000000,
  B00001111,B11111111,B11111111,B11111111,B11111100,B00000111,B11111100,B00000001,B11111111,B00000000,B00111000,B00110000,B01111111,B10000011,B11111110,B00000000,
  B00001111,B11111111,B11111111,B11111111,B11111100,B00000111,B11111100,B00000001,B11111111,B00000000,B00111000,B00110000,B01111111,B10000001,B11111110,B00001100,
  B00001111,B11111111,B11111111,B11111111,B11111100,B00000111,B11000100,B00000001,B11111111,B00000000,B00111000,B00000000,B01111111,B10000001,B11111110,B00011110,
  B00001111,B11111111,B11111111,B11111111,B11111100,B00000111,B11000000,B00000001,B11111111,B00000000,B00111000,B00000000,B01111111,B10000001,B11111110,B00011110,
  B00000111,B11111111,B11111111,B11111111,B11111100,B00000111,B10000000,B00000000,B11111110,B00000000,B00111000,B00000000,B01111111,B10000000,B11111110,B00011110,
  B00000111,B11111111,B11111111,B11111111,B11111000,B00000111,B00000000,B00000000,B11111110,B00000000,B00111000,B00000000,B01111111,B10000000,B11111110,B00011100,
  B10000111,B11111111,B11111111,B11111111,B11111000,B00000011,B00000000,B00000000,B11111110,B00000000,B00111000,B00000000,B01111111,B10000000,B01111110,B00011100,
  B11100111,B11111111,B11111111,B11111111,B11110000,B00000010,B00000000,B00000000,B11111110,B00000000,B01111100,B00000001,B11111111,B11000000,B01111110,B00111100,
  B11110011,B11111111,B11111111,B11111111,B11110000,B00000100,B00000000,B00000000,B11111110,B00000000,B01111110,B00000001,B11111111,B11100000,B00111111,B11111000,
  B11110011,B11111111,B11111111,B11111111,B11100000,B00000000,B00000000,B00000000,B01111110,B00000000,B11111110,B00000001,B11111111,B11100000,B00011111,B11110000,
  B01110001,B11111111,B11111111,B11111111,B11000000,B00000000,B00000000,B00000000,B01111100,B00000000,B00000000,B00000000,B00000000,B00000000,B00000011,B11000000,
  B01111001,B11111111,B11111111,B11111111,B10000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,
  B01111000,B11111111,B11111111,B11111111,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,
  B00111100,B11111111,B11111111,B11111110,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,
  B00111110,B01111111,B11111111,B11111100,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,
  B00011110,B01111111,B11111111,B11111000,B00000000,B00000000,B00000000,B00011111,B11111111,B11111111,B11111111,B11111111,B11111111,B11111111,B11111111,B11111111,
  B00011111,B00111111,B11111111,B11100000,B00000000,B00000000,B00000000,B00011100,B00000011,B11000001,B11100111,B10011001,B10011111,B11111001,B11110000,B00011111,
  B00001111,B10011111,B11111111,B11000000,B00000000,B00000000,B00000000,B00011100,B00000011,B00000000,B11100111,B10011001,B10001111,B11110000,B11110000,B00001111,
  B00000111,B01001111,B11111111,B00000000,B00000000,B00000000,B00000000,B00011100,B01111111,B00011100,B01100111,B10011001,B10001111,B11110000,B11110011,B11001111,
  B00000111,B00000111,B11111110,B00000000,B00000000,B00000000,B00000000,B00011100,B01111110,B00111110,B01100111,B10011001,B10001111,B11100000,B01110001,B11001111,
  B00000011,B00000011,B11111000,B00000000,B00100000,B00000000,B00000000,B00011100,B00000010,B00111110,B01100111,B10011001,B10001111,B11100110,B01110000,B00001111,
  B00000001,B00000000,B00000000,B00000000,B01000000,B00000000,B00000000,B00011100,B00000110,B00111110,B01100111,B10011001,B10001111,B11000100,B00110000,B00000111,
  B00000000,B10000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00011100,B11111110,B00110000,B01100111,B10011001,B10011111,B11000000,B00110011,B11000111,
  B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00011100,B01011111,B00010000,B01100011,B00011001,B10001110,B10001110,B00110001,B00000111,
  B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00011100,B00000011,B10000000,B01100000,B00111001,B10000000,B00001111,B00010000,B00001111,
  B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00011110,B00000011,B11100010,B00111000,B01111001,B11000000,B10011111,B10011000,B00111111,
  B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00011111,B11111111,B11111111,B11111111,B11111111,B11111111,B11111111,B11111111,B11111111,
  B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,
  B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,
  B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,
  B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000,B00000000
};
void begin_screen(){
  u8g2.begin();
}
void logo_screen(){
  u8g2.firstPage();
  do {
    u8g2.drawBitmap(0, 0, 128/8, 64, logo_original);
  } while ( u8g2.nextPage() );
}
void search_screen(){
  u8g2.firstPage();
  do {
    u8g2.setFont(u8g2_font_open_iconic_check_8x_t);
    u8g2.drawStr(64, 64, "A");
    u8g2.setFont(u8g2_font_crox5tb_tr);
    u8g2.drawStr(0, 16, "Press:");
    u8g2.drawStr(0, 38, "to");
    u8g2.drawStr(0, 60, "Scan");
  } while ( u8g2.nextPage() );
}
void found_screen(int a, int b, int c){
  u8g2.firstPage();
  do {
    if(b == 255){
      if(a%2 == 1){
        u8g2.setFont(u8g2_font_open_iconic_embedded_2x_t);
        u8g2.drawStr(128-16, 16, "J");
      }
      if(a%4 == 0){
        u8g2.setFont(u8g2_font_logisoso16_tr);
        u8g2.drawStr(0, 16, "Search");
      }
      if(a%4 == 1){
        u8g2.setFont(u8g2_font_logisoso16_tr);
        u8g2.drawStr(0, 16, "Searchi");
      }
      if(a%4 == 2){
        u8g2.setFont(u8g2_font_logisoso16_tr);
        u8g2.drawStr(0, 16, "Searchin");
      }
      if(a%4 == 3){
        u8g2.setFont(u8g2_font_logisoso16_tr);
        u8g2.drawStr(0, 16, "Searching");
      }
    }
    else if(b == 0){
      u8g2.setFont(u8g2_font_open_iconic_www_8x_t);
      u8g2.drawStr(64, 64, "J");
      u8g2.setFont(u8g2_font_crox5tb_tr);
      u8g2.drawStr(0, 16, "Device");
      u8g2.drawStr(0, 38, "no");
      u8g2.drawStr(0, 60, "found");
    }
    else{
      char aux[20];
      char aux2[20];  
      u8g2.setFont(u8g2_font_open_iconic_thing_2x_t);
      u8g2.drawStr(128-16, 16, "R");
      u8g2.setFont(u8g2_font_logisoso16_tr);
      u8g2.drawStr(0, 16, "Devices:");
      for(int i=0; i<b; i++){
        devices[i].toCharArray(aux2, 20);
        u8g2.setFont(u8g2_font_7x14_tr);
        sprintf(aux, "%d. %s", i+1, aux2);
        Serial.println(aux2);
        u8g2.drawStr(20,16+12*(i+1),aux);
      }
      if(c != 0){
        //u8g2.setFont(u8x8_font_open_iconic_arrow_1x1);
        u8g2.setFont(u8g2_font_7x14_tr);
        u8g2.drawStr(10, 12+12*(c), "C");
      }
    }
  } while ( u8g2.nextPage() );
}
void download_screen(){
  
}
void done_screen(){
  
}
